---
title: Nmap概述和示例
date: 2022-06-10 21:37:03
permalink: /pages/b43d65/
categories:
  - Nmap_Network_Scanning
  - 开始使用Nmap
tags:
  -
author:
  name: opzhang
  link: https://github.com/opzhang
---

有时明白某些事最好的办法是在实际行动中看到它。
这一节中包含了（大部分）虚构但是典型情况下Nmap的使用示例。
作为Nmap新手，不应该期望马上了解一切。
本章只是对后面的章节中详细介绍功能的全面概述。
本书中包含的“解决方案”一章中为安全审计员和网络管理员演示了许多其他常见的Nmap任务。

# Avatar Online
12月15日，Felix(人名)一如既往的在上班，虽然他不希望有更多的结构化任务。
但由于即将到来的假期，他所在的旧金山小型渗透测试公司此时非常闲暇。
Felix在工作时间去做他最新的兴趣，构建功能强大的wifi天线，用于无线网络评估(wireless assessments)和驾驶攻击探索(也称接入点映射(war driving))。
尽管如此，Felix还是希望有更多业务。
他从小时候就花大量的时间学习，网络、安全、Unix和电话系统相关的所有知识，他一直都非常喜欢和崇拜黑客。
有时候，好奇心让他走的有点远了，Felix被卷入进1990年的Operation Sundevil起诉，差点被一网打尽。
幸运的是，Felix从青少年期就没有犯罪记录，在这期间，他还保留着安全漏洞的专业知识。
最为一名专业人士，他能和以前一样进行网络入侵，但是现在由于合同的保护，不会被起诉，甚至还能涨工资。
他现在可以在提出报告时吹嘘他的成果，而不用保密了。
他在天线焊接时，被老板的宣布打断了，但他并没有失望，因为销售部门完成了与Aatar Online游戏公司的渗透测试交易。

Avatar Online(AO)是一家致力于开发出下一代大型多人在线角色扮演游戏（MMORPG）的小公司。
他们产品的灵感来自于Neil Stevenson's 雪崩(Snow Crash)中所设想的 Metaverse，非常令人着迷，但是属于高度机密。

 After witnessing the high-profile leak of Valve Software's upcoming game source code, AO quickly hired the security consultants.

  Felix's task is to initiate an external (from outside the firewall) vulnerability assessment while his partners work on physical security, source code auditing, social engineering, and so forth. Felix is permitted to exploit any vulnerabilities found.

The first step in a vulnerability assessment is network discovery. This reconnaissance stage determines what IP address ranges the target is using, what hosts are available, what services those hosts are offering, general network topology details, and what firewall/filtering policies are in effect.

Determining the IP ranges to scan would normally be an elaborate process involving ARIN (or another geographical registry) lookups, DNS queries and zone transfer attempts, various web sleuthing techniques, and more. But in this case, Avatar Online explicitly specified what networks they want tested: the corporate network on 6.209.24.0/24 and their production/DMZ systems residing on 6.207.0.0/22. Felix checks the IP whois records anyway and confirms that these IP ranges are allocated to AO[1]. Felix subconsciously decodes the CIDR notation[2] and recognizes this as 1,280 IP addresses. No problem.

Being the careful type, Felix first starts out with what is known as an Nmap list scan (-sL option). This feature simply enumerates every IP address in the given target netblock(s) and does a reverse-DNS lookup (unless -n was specified) on each. One reason to do this first is stealth. The names of the hosts can hint at potential vulnerabilities and allow for a better understanding of the target network, all without raising alarm bells[3]. Felix is doing this for another reason—to double-check that the IP ranges are correct. The systems administrator who provided the IPs might have made a mistake, and scanning the wrong company would be a disaster. The contract signed with Avatar Online may act as a get-out-of-jail-free card for penetrating their networks, but will not help if Felix accidentally compromises another company's server! The command he uses and an excerpt of the results are shown in Example 1.1.
